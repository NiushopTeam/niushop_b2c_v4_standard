<view class="{{['allPage',isBottom?'bottom':'']}}" data-theme="{{themeStyle}}"><view class="container"><block wx:if="{{isBottom}}"><block><block wx:for="{{$root.l1}}" wx:for-item="siteItem" wx:for-index="siteIndex" wx:key="siteIndex"><view class="cart-wrap"><view class="cart-header"><view>共<text class="ns-text-color ns-padding-left ns-padding-right">{{cartData[0].cartList.length}}</text>件商品</view><view data-event-opts="{{[['tap',[['edit',[siteIndex]]]]]}}" class="cart-operation" bindtap="__e">{{siteItem.$orig.edit?$root.m0:$root.m1}}</view></view><block wx:for="{{siteItem.l0}}" wx:for-item="item" wx:for-index="cartIndex" wx:key="cartIndex"><block><view class="cart-goods"><view class="{{['goods-wrap',(siteItem.$orig.edit)?'edit':'']}}"><view data-event-opts="{{[['tap',[['singleElection',[siteIndex,cartIndex]]]]]}}" class="{{['iconfont',item.$orig.checked?'iconyuan_checked ns-text-color':'iconyuan_checkbox']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['toGoodsDetail',['$0'],[[['cartData','',siteIndex],['cartList','',cartIndex]]]]]]]}}" class="goods-img" bindtap="__e"><image src="{{item.g0}}" mode="aspectFill" data-event-opts="{{[['error',[['imageError',[siteIndex,cartIndex]]]]]}}" binderror="__e"></image></view><view class="goods-info"><view data-event-opts="{{[['tap',[['toGoodsDetail',['$0'],[[['cartData','',siteIndex],['cartList','',cartIndex]]]]]]]}}" class="goods-name" bindtap="__e">{{item.$orig.goods_name}}</view><block wx:if="{{item.$orig.sku_spec_format}}"><view class="sku "><view class="goods-spec"><block wx:for="{{item.$orig.sku_spec_format}}" wx:for-item="x" wx:for-index="i" wx:key="i"><block>{{x.spec_value_name+" "+(i<item.$orig.sku_spec_format.length-1?'；':'')}}</block></block></view></view></block><view class="goods-sub-section"><block wx:if="{{item.$orig.promotion_type==1}}"><block><block wx:if="{{item.m2>0&&item.m3<item.m4}}"><block><view class="goods-price ns-text-color"><view class="bottom-price ns-text-color"><text class="unit">{{siteItem.m5}}</text>{{''+item.$orig.member_price+''}}<image src="{{siteItem.g1}}"></image></view></view></block></block><block wx:else><block><view class="goods-price ns-text-color"><view class="bottom-price ns-text-color"><text class="unit">{{siteItem.m6}}</text>{{''+item.$orig.discount_price+''}}<image src="{{siteItem.g2}}"></image></view></view></block></block></block></block><block wx:else><block><block wx:if="{{item.m7>0}}"><block><view class="goods-price ns-text-color"><view class="bottom-price ns-text-color"><text class="unit">{{siteItem.m8}}</text>{{''+item.$orig.member_price+''}}<image src="{{siteItem.g3}}"></image></view></view></block></block><block wx:else><block><view class="goods-price ns-text-color"><view class="bottom-price ns-text-color"><text class="unit">{{siteItem.m9}}</text>{{''+item.$orig.price+''}}</view></view></block></block></block></block><uni-number-box vue-id="{{'a225604e-1-'+siteIndex+'-'+cartIndex}}" min="{{1}}" max="{{item.$orig.stock}}" value="{{item.$orig.num}}" size="small" modifyFlag="{{modifyFlag}}" data-event-opts="{{[['^change',[['cartNumChange',['$event',['o',['siteIndex',siteIndex],['cartIndex',cartIndex]]]]]]]}}" bind:change="__e" bind:__l="__l"></uni-number-box></view></view></view><view data-event-opts="{{[['tap',[['deleteCart',[siteIndex,cartIndex]]]]]}}" class="{{['item-del ns-bg-color',(siteItem.$orig.edit)?'show':'']}}" bindtap="__e">{{siteItem.m10}}</view></view></block></block></view></block><block wx:if="{{invalidGoods.length}}"><view class="cart-wrap"><view class="cart-header"><view class="shop-info"><text class="ns-font-size-sm">{{"失效商品"+invalidGoods.length+"件"}}</text></view><view data-event-opts="{{[['tap',[['clearInvalidGoods',['$event']]]]]}}" class="cart-operation ns-text-color ns-font-size-sm" bindtap="__e">清空失效商品</view></view><block wx:for="{{$root.l2}}" wx:for-item="goodsItem" wx:for-index="goodsIndex" wx:key="goodsIndex"><block><view class="cart-goods invalid-goods"><view class="invalid-mark">失效</view><view class="goods-wrap"><view class="goods-img"><image src="{{goodsItem.g4}}" mode="aspectFill"></image></view><view class="goods-info"><view class="goods-name">{{goodsItem.$orig.sku_name}}</view><text class="sku"></text><block wx:if="{{goodsItem.$orig.member_price>0&&goodsItem.$orig.member_price<goodsItem.$orig.discount_price}}"><view class="goods-sub-section"><text class="goods-price ns-text-color"><text class="unit">{{$root.m11}}</text>{{''+goodsItem.$orig.member_price+''}}</text></view></block><view class="goods-sub-section"><text class="goods-price ns-text-color"><text class="unit">{{$root.m12}}</text>{{''+goodsItem.$orig.discount_price+''}}</text></view></view></view></view></block></block></view></block></block></block><block wx:else><block><view class="cart-empty"><block wx:if="{{token!=''}}"><ns-empty vue-id="a225604e-2" text="{{$root.m13}}" fixed="{{!1}}" bind:__l="__l"></ns-empty></block><block wx:else><ns-empty vue-id="a225604e-3" text="{{$root.m14}}" emptyBtn="{{emptyBtn1}}" fixed="{{!1}}" bind:__l="__l"></ns-empty></block></view></block></block></view><ns-goods-recommend class="vue-ref" vue-id="a225604e-4" data-ref="goodrecommend" bind:__l="__l"></ns-goods-recommend><block wx:if="{{cartData.length||invalidGoods.length}}"><view class="{{['cart-bottom',(isIphoneX)?'active':'']}}"><view data-event-opts="{{[['tap',[['allElection',['$event']]]]]}}" class="all-election" bindtap="__e"><view class="{{['iconfont',checkAll?'iconyuan_checked ns-text-color':'iconyuan_checkbox']}}"></view><text>{{$root.m15}}</text></view><view class="settlement-info"><text>{{''+$root.m16+'：'}}<text class="ns-text-color">{{''+$root.m17+''}}<text>{{totalPrice}}</text></text></text></view><view class="operation-btn"><block wx:if="{{totalCount!=0}}"><button type="primary" size="mini" data-event-opts="{{[['tap',[['settlement',['$event']]]]]}}" bindtap="__e">{{$root.m18+"("+totalCount+")"}}</button></block><block wx:else><button type="primary" size="mini" disabled="{{true}}" data-event-opts="{{[['tap',[['settlement',['$event']]]]]}}" bindtap="__e">{{$root.m19+"("+totalCount+")"}}</button></block></view></view></block><loading-cover class="vue-ref" vue-id="a225604e-5" data-ref="loadingCover" bind:__l="__l"></loading-cover><diy-bottom-nav vue-id="a225604e-6" type="shop" bind:__l="__l"></diy-bottom-nav><block wx:if="{{showTop}}"><to-top bind:toTop="__e" vue-id="a225604e-7" data-event-opts="{{[['^toTop',[['scrollToTopNative']]]]}}" bind:__l="__l"></to-top></block><ns-show-toast vue-id="a225604e-8" bind:__l="__l"></ns-show-toast></view>