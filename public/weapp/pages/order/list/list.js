(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/list/list","components/ns-show-toast/ns-show-toast"],{"133e":function(t,e,r){"use strict";(function(t){r("6b76");i(r("66fd"));var e=i(r("29f9"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},"17fc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(r("4c22"));function a(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{title:""}},mixins:[i.default]};e.default=s},"1a87":function(t,e,r){"use strict";var i=r("3e50"),a=r.n(i);a.a},"29f9":function(t,e,r){"use strict";r.r(e);var i=r("aad0"),a=r("f481");for(var s in a)"default"!==s&&function(t){r.d(e,t,(function(){return a[t]}))}(s);r("1a87"),r("f002");var n,o=r("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"33274916",null,!1,i["a"],n);e["default"]=u.exports},"2b5b":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=o(r("f505")),s=o(r("30b7")),n=o(r("4c22"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(){r.e("components/uni-load-more/uni-load-more").then(function(){return resolve(r("0f65"))}.bind(null,r)).catch(r.oe)},c=(i={components:{uniLoadMore:d},data:function(){return{scrollInto:"",orderStatus:"all",statusList:[],orderList:[],contentText:{},mergePayOrder:[],isIphoneX:!1}}},u(i,"components",{nsShowToast:a.default}),u(i,"mixins",[s.default,n.default]),u(i,"onLoad",(function(t){t.status&&(this.orderStatus=t.status)})),u(i,"onShow",(function(){this.$langConfig.refresh(),this.isIphoneX=this.$util.uniappIsIPhoneX(),this.getOrderStatus(),t.getStorageSync("token")?this.$refs.mescroll&&this.$refs.mescroll.refresh():this.$util.redirectTo("/pages/login/login/login",{back:"/pages/order/list/list?status="+this.orderStatus})})),u(i,"methods",{ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.orderStatus=this.statusList[e].status,""==this.orderStatus&&(this.mergePayOrder=[]),this.$refs.loadingCover.show(),this.$refs.mescroll.refresh()},getListData:function(t){var e=this;this.$api.sendRequest({url:"/api/order/lists",data:{page:t.num,page_size:t.size,order_status:this.orderStatus},success:function(r){var i=[],a=r.message;0==r.code&&r.data?i=r.data.list:e.$util.showToast({title:a}),t.endSuccess(i.length),1==t.num&&(e.orderList=[]),e.orderList=e.orderList.concat(i),e.orderList.forEach((function(t){t.order_goods.forEach((function(t){if(t.sku_spec_format)try{t.sku_spec_format=JSON.parse(t.sku_spec_format)}catch(e){t.sku_spec_format=t.sku_spec_format}else t.sku_spec_format=[]}))})),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(r){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},getOrderStatus:function(){this.statusList=[{status:"all",name:this.$lang("all"),id:"status_0"},{status:"waitpay",name:this.$lang("waitPay"),id:"status_1"},{status:"waitsend",name:this.$lang("readyDelivery"),id:"status_2"},{status:"waitconfirm",name:this.$lang("waitDelivery"),id:"status_3"},{status:"waitrate",name:this.$lang("waitEvaluate"),id:"status_4"}]},operation:function(t,e){var r=this;this.status;switch(t){case"orderPay":this.orderPay(e);break;case"orderClose":this.orderClose(e.order_id,(function(){r.$refs.mescroll.refresh()}));break;case"memberTakeDelivery":this.orderDelivery(e.order_id,(function(){r.$refs.mescroll.refresh()}));break;case"trace":this.$util.redirectTo("/pages/order/logistics/logistics",{order_id:e.order_id});break;case"memberOrderEvaluation":this.$util.redirectTo("/pages/order/evaluate/evaluate",{order_id:e.order_id});break}},orderDetail:function(t){switch(parseInt(t.order_type)){case 2:this.$util.redirectTo("/pages/order/detail_pickup/detail_pickup",{order_id:t.order_id});break;case 3:this.$util.redirectTo("/pages/order/detail_local_delivery/detail_local_delivery",{order_id:t.order_id});break;case 4:this.$util.redirectTo("/pages/order/detail_virtual/detail_virtual",{order_id:t.order_id});break;default:this.$util.redirectTo("/pages/order/detail/detail",{order_id:t.order_id});break}},selectOrder:function(t){-1!=this.$util.inArray(t,this.mergePayOrder)?this.mergePayOrder.splice(this.$util.inArray(t,this.mergePayOrder),1):this.mergePayOrder.push(t)},mergePay:function(){var t=this;this.mergePayOrder.length&&this.$api.sendRequest({url:"/api/order/pay",data:{order_ids:this.mergePayOrder.toString()},success:function(e){e.code>=0?t.$util.redirectTo("/pages/pay/index/index",{code:e.data}):t.$util.showToast({title:e.message})}})},imageError:function(t,e){this.orderList[t].order_goods[e].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()}}),u(i,"computed",{mpOrderList:function(){if(this.orderList[this.status])return this.orderList[this.status].list||[]}}),i);e.default=c}).call(this,r("543d")["default"])},"3e50":function(t,e,r){},"7b3d":function(t,e,r){},a46d:function(t,e,r){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},s=[];r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return i}))},aad0:function(t,e,r){"use strict";var i={nsEmpty:function(){return r.e("components/ns-empty/ns-empty").then(r.bind(null,"211f"))},loadingCover:function(){return r.e("components/loading-cover/loading-cover").then(r.bind(null,"cd2f"))},nsShowToast:function(){return Promise.resolve().then(r.bind(null,"f505"))}},a=function(){var t=this,e=t.$createElement,r=(t._self._c,t.$lang("common.currencySymbol")),i=t.__map(t.orderList,(function(e,r){var i=t.$util.inArray(e.order_id,t.mergePayOrder),a=t.$lang("common.currencySymbol"),s=t.__map(e.order_goods,(function(e,r){var i=t.$util.img(e.sku_image,{size:"mid"});return{$orig:t.__get_orig(e),g1:i}}));return{$orig:t.__get_orig(e),g0:i,m0:a,l0:s}})),a=t.$lang("emptyTips");t.$mp.data=Object.assign({},{$root:{m1:r,l1:i,m2:a}})},s=[];r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return i}))},ad6d:function(t,e,r){"use strict";r.r(e);var i=r("17fc"),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},b20a:function(t,e,r){},ced5:function(t,e,r){"use strict";var i=r("7b3d"),a=r.n(i);a.a},f002:function(t,e,r){"use strict";var i=r("b20a"),a=r.n(i);a.a},f481:function(t,e,r){"use strict";r.r(e);var i=r("2b5b"),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},f505:function(t,e,r){"use strict";r.r(e);var i=r("a46d"),a=r("ad6d");for(var s in a)"default"!==s&&function(t){r.d(e,t,(function(){return a[t]}))}(s);r("ced5");var n,o=r("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"0b2a6f65",null,!1,i["a"],n);e["default"]=u.exports}},[["133e","common/runtime","common/vendor"]]]);