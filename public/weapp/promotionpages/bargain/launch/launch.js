(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/bargain/launch/launch"],{1024:function(n,i,t){},"15a5":function(n,i,t){},"1fa5":function(n,i,t){"use strict";var e=t("15a5"),o=t.n(e);o.a},"25a1":function(n,i,t){"use strict";t.r(i);var e=t("c455"),o=t("ee21");for(var a in o)"default"!==a&&function(n){t.d(i,n,(function(){return o[n]}))}(a);t("1fa5"),t("3802");var r,u=t("f0c5"),c=Object(u["a"])(o["default"],e["b"],e["c"],!1,null,"4ce7bcbf",null,!1,e["a"],r);i["default"]=c.exports},3802:function(n,i,t){"use strict";var e=t("1024"),o=t.n(e);o.a},"4b21":function(n,i,t){"use strict";(function(n){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(){Promise.all([t.e("common/vendor"),t.e("components/l-time/l-time")]).then(function(){return resolve(t("9657"))}.bind(null,t)).catch(t.oe)},o=function(){t.e("components/uni-popup/uni-popup").then(function(){return resolve(t("d380"))}.bind(null,t)).catch(t.oe)},a={components:{LTime:e,uniPopup:o},data:function(){return{windowHeight:0,id:0,info:{headimg:""},bargainRecord:[],page:1,totalPage:1,load:!1,timeMachine:null,memberId:0,bargainMoney:"0.00"}},onLoad:function(n){this.getHeight(),n.id&&(this.id=n.id)},computed:{cutMoney:function(){return this.info.price-this.info.curr_price},surplusMoney:function(){return this.info.curr_price-this.info.floor_price},progress:function(){var n=this.info.price-this.info.floor_price,i=parseInt(this.cutMoney/n*100);return isNaN(i)?0:i}},onShow:function(){this.$langConfig.refresh(),n.getStorageSync("token")?(this.getBargainInfo(),this.getMemberId()):this.$util.redirectTo("/pages/login/login/login",{back:"/promotionpages/bargain/launch/launch?id="+this.id})},methods:{getHeight:function(){var i=this;n.getSystemInfo({success:function(n){i.windowHeight=n.windowHeight-44,i.iphoneX&&(i.windowHeight=i.windowHeight-33)}})},getBargainInfo:function(){var n=this;this.$api.sendRequest({url:"/bargain/api/bargain/info",data:{id:this.id},success:function(i){0==i.code?(n.info=i.data,n.getBargainRecord(1),0==n.info.status&&(n.timeMachine=n.$util.countDown(n.info.end_time-i.timestamp)),n.$refs.loadingCover&&n.$refs.loadingCover.hide()):n.$util.redirectTo("/promotionpages/bargain/my_bargain/my_bargain")},fail:function(i){n.$refs.loadingCover&&n.$refs.loadingCover.hide()}})},getBargainRecord:function(n){var i=this;this.load||(this.load=!0,this.$api.sendRequest({url:"/bargain/api/bargain/record",data:{page:n,id:this.info.launch_id},success:function(t){i.load=!1,i.totalPage=t.data.page_count,i.page=n,0==t.code&&t.data.list.length&&(i.bargainRecord=1==n?t.data.list:i.bargainRecord.concat(t.data.list))}}))},scrolltolower:function(){var n=this.page+1;!this.load&&n<=this.totalPage&&this.getBargainRecord(n)},buyNow:function(){var i=this;n.setStorage({key:"bargainOrderCreateData",data:{launch_id:this.info.launch_id},success:function(){i.$util.redirectTo("/promotionpages/bargain/payment/payment")}})},bargain:function(){var n=this;this.$api.sendRequest({url:"/bargain/api/bargain/bargain",data:{id:this.info.launch_id},success:function(i){0==i.code&&(n.bargainMoney=parseFloat(i.data.bargain_money).toFixed(2),n.$refs.uniPopup.open(),n.getBargainInfo())}})},getMemberId:function(){var n=this;this.$api.sendRequest({url:"/api/member/id",success:function(i){i.code>=0&&(n.memberId=i.data)}})},closePopup:function(){this.$refs.uniPopup.close()}},filters:{moneyFormat:function(n){return parseFloat(n).toFixed(2)}},onShareAppMessage:function(){var n="/promotionpages/bargain/launch/launch?id="+this.id;return this.memberId&&(n+="&source_member="+this.memberId),{title:"嘿！朋友就差你这一刀了，帮一下忙呗~",imageUrl:this.$util.img(this.info.sku_image,{size:"big"}),path:n,success:function(n){},fail:function(n){}}}};i.default=a}).call(this,t("543d")["default"])},c455:function(n,i,t){"use strict";var e={uniCountDown:function(){return t.e("components/uni-count-down/uni-count-down").then(t.bind(null,"e675"))},lTime:function(){return Promise.all([t.e("common/vendor"),t.e("components/l-time/l-time")]).then(t.bind(null,"9657"))},uniPopup:function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"d380"))},loadingCover:function(){return t.e("components/loading-cover/loading-cover").then(t.bind(null,"cd2f"))}},o=function(){var n=this,i=n.$createElement,t=(n._self._c,n.$util.img(n.$util.getDefaultImage().default_headimg)),e=n.$util.img(n.info.headimg),o=n.$util.img(n.info.sku_image),a=n.$lang("common.currencySymbol"),r=n.$lang("common.currencySymbol"),u=n._f("moneyFormat")(n.cutMoney),c=n._f("moneyFormat")(n.surplusMoney),s=n.$util.img(n.$util.getDefaultImage().default_headimg),l=n.__map(n.bargainRecord,(function(i,t){var e=n.$util.img(i.headimg);return{$orig:n.__get_orig(i),g4:e}})),d=n.$util.img("upload/uniapp/bargain/coin.png");n._isMounted||(n.e0=function(i){return n.$util.redirectTo("/promotionpages/bargain/list/list")},n.e1=function(i){return n.$util.redirectTo("/promotionpages/bargain/list/list")},n.e2=function(i){return n.$util.redirectTo("/promotionpages/bargain/list/list")},n.e3=function(i){return n.$util.redirectTo("/promotionpages/bargain/list/list")}),n.$mp.data=Object.assign({},{$root:{g0:t,g1:e,g2:o,m0:a,m1:r,f0:u,f1:c,g3:s,l0:l,g5:d}})},a=[];t.d(i,"b",(function(){return o})),t.d(i,"c",(function(){return a})),t.d(i,"a",(function(){return e}))},ed9f:function(n,i,t){"use strict";(function(n){t("6b76");e(t("66fd"));var i=e(t("25a1"));function e(n){return n&&n.__esModule?n:{default:n}}n(i.default)}).call(this,t("543d")["createPage"])},ee21:function(n,i,t){"use strict";t.r(i);var e=t("4b21"),o=t.n(e);for(var a in e)"default"!==a&&function(n){t.d(i,n,(function(){return e[n]}))}(a);i["default"]=o.a}},[["ed9f","common/runtime","common/vendor"]]]);