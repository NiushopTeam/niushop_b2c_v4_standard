(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/member/address_edit/address_edit"],{"0009":function(e,t,a){},1063:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a("18e3")),n=o(a("4c22"));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(){Promise.all([a.e("common/vendor"),a.e("components/pick-regions/pick-regions")]).then(function(){return resolve(a("06da"))}.bind(null,a)).catch(a.oe)},s=function(){Promise.all([a.e("common/vendor"),a.e("components/ns-show-toast/ns-show-toast")]).then(function(){return resolve(a("f505"))}.bind(null,a)).catch(a.oe)},d={components:{pickRegions:r,nsShowToast:s},data:function(){return{formData:{id:0,name:"",mobile:"",telephone:"",province_id:"",city_id:"",district_id:"",community_id:"",address:"",full_address:"",latitude:0,longitude:0,is_default:1},address:"",addressValue:"",back:"",redirect:"redirectTo",flag:!1,defaultRegions:[]}},onLoad:function(e){e.id&&(this.formData.id=e.id,this.getAddressDetail()),e.back&&(this.back=e.back),e.redirect&&(this.redirect=e.redirect)},onShow:function(){this.$langConfig.refresh()},onReady:function(){this.$refs.loadingCover.hide()},onHide:function(){this.flag=!1},mixins:[n.default],methods:{getAddressDetail:function(){var e=this;this.$api.sendRequest({url:"/api/memberaddress/info",data:{id:this.formData.id},success:function(t){var a=t.data;null!=a&&(e.formData.name=a.name,e.formData.mobile=a.mobile,e.formData.telephone=a.telephone,e.formData.address=a.address,e.formData.full_address=a.full_address,e.formData.latitude=a.latitude,e.formData.longitude=a.longitude,e.formData.is_default=a.is_default,e.defaultRegions=[a.province_id,a.city_id,a.district_id]),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(t){e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},handleGetRegions:function(e){this.formData.full_address="",this.formData.full_address+=void 0!=e[0]?e[0].label:"",this.formData.full_address+=void 0!=e[1]?"-"+e[1].label:"",this.formData.full_address+=void 0!=e[2]?"-"+e[2].label:"",this.addressValue="",this.addressValue+=void 0!=e[0]?e[0].value:"",this.addressValue+=void 0!=e[1]?"-"+e[1].value:"",this.addressValue+=void 0!=e[2]?"-"+e[2].value:""},selectAddress:function(){var t=this;e.chooseLocation({success:function(e){t.formData.latitude=e.latitude,t.formData.longitude=e.longitude,t.formData.address=e.name}})},vertify:function(){this.formData.name=this.formData.name.trim(),this.formData.mobile=this.formData.mobile.trim(),this.formData.address=this.formData.address.trim();var e=[{name:"name",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"full_address",checkType:"required",errorMsg:"请选择省市区县"},{name:"address",checkType:"required",errorMsg:"详细地址不能为空"}],t=i.default.check(this.formData,e);return!!t||(this.$util.showToast({title:i.default.error}),this.flag=!1,!1)},saveAddress:function(){var t=this;if(!this.flag&&(this.flag=!0,this.vertify())){var a=this.addressValue.split("-"),i={},n="";i={name:this.formData.name,mobile:this.formData.mobile,telephone:this.formData.telephone,province_id:a[0],city_id:a[1],district_id:a[2],community_id:0,address:this.formData.address,full_address:this.formData.full_address,latitude:this.formData.latitude,longitude:this.formData.longitude,is_default:this.formData.is_default},n="add",this.formData.id&&(n="edit",i.id=this.formData.id),this.$api.sendRequest({url:"/api/memberaddress/"+n,data:i,success:function(a){if(t.flag=!1,0==a.code)if(""!=t.back&&"edit"!=n){for(var i=!0,o=getCurrentPages().reverse(),r=0;r<o.length;r++)if(-1!=t.back.indexOf(o[r].route)){i=!1,e.navigateBack({delta:r});break}i&&t.$util.redirectTo(t.back,{},"redirectTo")}else t.$util.showToast({title:a.message}),e.navigateBack({delta:1})},fail:function(e){t.flag=!1}})}}}};t.default=d}).call(this,a("543d")["default"])},2938:function(e,t,a){"use strict";a.r(t);var i=a("ce76"),n=a("e151");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("e14d");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=d.exports},ce76:function(e,t,a){"use strict";var i={pickRegions:function(){return Promise.all([a.e("common/vendor"),a.e("components/pick-regions/pick-regions")]).then(a.bind(null,"06da"))},loadingCover:function(){return a.e("components/loading-cover/loading-cover").then(a.bind(null,"cd2f"))},nsShowToast:function(){return Promise.all([a.e("common/vendor"),a.e("components/ns-show-toast/ns-show-toast")]).then(a.bind(null,"f505"))}},n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.$lang("consignee")),i=e.$lang("consigneePlaceholder"),n=e.$lang("mobile"),o=e.$lang("mobilePlaceholder"),r=e.$lang("telephone"),s=e.$lang("telephonePlaceholder"),d=e.$lang("receivingCity"),l=e.$lang("address"),u=e.$lang("addressPlaceholder"),c=e.$lang("save");e.$mp.data=Object.assign({},{$root:{m0:a,m1:i,m2:n,m3:o,m4:r,m5:s,m6:d,m7:l,m8:u,m9:c}})},o=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}))},d264:function(e,t,a){"use strict";(function(e){a("6b76");i(a("66fd"));var t=i(a("2938"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},e14d:function(e,t,a){"use strict";var i=a("0009"),n=a.n(i);n.a},e151:function(e,t,a){"use strict";a.r(t);var i=a("1063"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a}},[["d264","common/runtime","common/vendor"]]]);